# Servidor DHCP y dos clientes

Lo que nos pide:

| Nombre de equipo            | Funcion        | Direcciones IP  |
|-----------------------------|----------------|-----------------|
| Server1                     | Servidor DHCP  | enp0s3: 192.168.0.200 enp0s8: 192.168.1.200 enp0s9:192.168.2.200  |
| Client1                     | Cliente 1      | enp0s3: dinámica dentro de 192.168.1.0/24  |
| *(Ubuntu desktop)* Client2  | Cliente 2      | enp0s3: dinámica dentro de 192.168.2.0/24  |

En este caso son 3 interfaces diferentes, tenemos enp0s3, enp0s8 y enp0s9:

- **enp0s3**: Pertenece el servidor DHCP.
- **enp0s8**: Pertenece Cliente 1.
- **enp0s9**: Pertenece Cliente 2.

Por otro lado, tenemos 2 redes internas intnet y intnet2, a las cuales:

- **intnet**: Pertenece enp0s8 de server1 y enp0s3 de client1.
- **intnet2**: Pertenece enp0s9 de server1 y enp0s3 de *(Ubuntu desktop)* client2.

## Paso 1

Comprobar configuraciones de cada maquina virtual.

En la maquina de Server1 tendremos que tener 3 adaptadores:

- Adaptador 1: Adaptador puente.
- Adaptador 2: Red interna ***(intnet)*** .
- Adaptador 3: Red interna ***(intnet2)*** .

En la maquina de Client1 tendremos que tener 2 adaptadores:

- Adaptador 1: Adaptador puente.
- Adaptador 2: Red interna ***(intnet)*** .

En la maquina de *(Ubuntu desktop)* Client2 tendremos que tener 2 adaptadores:

- Adaptador 1: Adaptador puente.
- Adaptador 2: Red interna ***(intnet2)*** .

## Paso 2

Preparar las maquinas virtuales para llevar a cabo la configuracion de DHCP.

Abrimos el archivo de configuracion de red `/etc/netplan` en formato yaml de cada maquina virtual.

La de Server1 tendria que quedar asi:
```markdown
network:
  ethernets:
    enp0s3:
      dhcp4: true
    enp0s8:
      dhcp4: no
      dhcp6: no
      addresses: [192.168.1.200/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
  version: 2
```

